{% extends 'hobro/base.html' %}
{% load itemviews %}

{% block title %}
{% if number %}Kapitel {{ number }}
{% else %}Alle kapitler{% endif %}
{% endblock %}


{% block content %}
<div class="progress-container">
    <div class="progress-bar" id="theProgressBar"></div>
</div>

    {% for item in items %}
        {% with a=item.get_type %}
            {% if a == "section" %}
                {% show_section item %}
            {% elif a == "story" %}
                {% show_story item %}
            {% elif a == "post" %}
                {% show_post item %}
            {% elif a == "postphoto" %}
                {% show_postphoto item %}
            {% elif a == "postvideo" %}
                {% show_postvideo item %}
            {% elif a == "profileevent" %}
                {% show_profileevent item anim_pref %}
            {% elif a == "itemembed" %}
                {% show_itemembed item anim_pref %}
            {% elif a == "swgrs_post" %}
                {% show_swgrspost item anim_pref %}
            {% elif a == "swgrs_media" %}
                {% show_swgrsmedia item anim_pref %}
            {% else %}
                <div class="post">
                    <h2>Indhold kunne ikke findes</h2>
                    <p>{{item}}</p>
                </div>
            {% endif %}
        {% endwith %}
        {% if item.comment %}
            {% show_comment item.comment comment_pref %}
        {% endif %}
    {% endfor %}
    <div class="section is-medium has-background-dark is-raised has-text-centered">
    {% if next %}
        <a href="{% url 'item_page' number=next %}" class="button navy-text is-medium is-primary is-rounded do-shadow" data-sal="slide-up" data-sal-duration="2000" data-sal-easing="ease-out">
            <span class="icon"><i class="fas fa-forward"></i></span>
            <span>Videre til kapitel {{next}}</span>
        </a>
    {% else %}
        <h1 class="is-size-3 has-text-light">Her slutter historien</h1><br>
        <a href="{% url 'music_list' %}" class="button navy-text is-medium is-info is-rounded do-shadow"  data-sal="slide-up" data-sal-duration="2000" data-sal-easing="ease-out">
            <span class="icon"><i class="fas fa-music"></i></span>
            <span>Udforsk musikken</span>
        </a>
    {% endif %}
    </div>

<script>
    window.onscroll = function() {scrollPosition()};

    function scrollPosition() {
      var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      var scrolled = (winScroll / height) * 100;
      document.getElementById("theProgressBar").style.width = scrolled + "%";
      //console.log(scrolled);
    }
</script>

{% endblock %}