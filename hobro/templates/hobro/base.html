{% load static %}
<!DOCTYPE html>

<html class="has-background-dark" lang="da">
    <head>
        <title>{% block title %}{% endblock %} | Tegnedreng Records</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="text/javascript">
        if (!"IntersectionObserver" in window){
            // only contact polyfill.io if necessary
            document.write('<script crossorigin=\"anonymous\" src=\"https:\/\/polyfill.io\/v3\/polyfill.min.js?features=IntersectionObserver\"><\/script>');
        }
        </script>
        {% comment %}<script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver"></script>{% endcomment %}
          {% load django_simple_bulma %}
          {% bulma %}
          {% font_awesome %}
        {% if request.COOKIES.show_animations != "false" %}
            <script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/2.0.5/velocity.min.js"></script>
        {% endif %}
        <script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@10.20.1/dist/lazyload.min.js"></script>

        <script src="{% static 'hobro/js/site.js' %}"></script>
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
        <link href="https://fonts.googleapis.com/css?family=Assistant:400,700,800|Crimson+Text:400,400i,700|Fira+Mono" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="{% static 'hobro/sal/sal.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'hobro/style.css' %}">
        <link rel="icon" href="https://maanegal.dk/wp-content/uploads/cropped-brand-square-32x32.png" sizes="32x32" />
        <link rel="icon" href="https://maanegal.dk/wp-content/uploads/cropped-brand-square-192x192.png" sizes="192x192" />
        <link rel="apple-touch-icon-precomposed" href="https://maanegal.dk/wp-content/uploads/cropped-brand-square-180x180.png" />
        <meta name="msapplication-TileImage" content="https://maanegal.dk/wp-content/uploads/cropped-brand-square-270x270.png" />
    </head>
<body>

<div class="modal" id="settings-modal">
  <div class="modal-background" onclick="modalClose('settings-modal')"></div>
  <div class="modal-content" style="display:block;">
        <h2 class="navbar-item has-text-light has-text-centered title is-size-4 is-size-3-desktop">
        <span class="icon is-small"><i class="fa fa-cog"></i></span>Indstillinger for siden</h2>
        <div class="tile is-ancestor">
             <div class="tile is-parent is-4-fullhd is-6-widescreen is-6-desktop is-6-tablet"><div class="tile is-child">
                <p class="navbar-setting has-text-light is-uppercase has-text-centered">Vis smarte animationer:</p>
                <div class="has-text-light has-text-centered navbar-controls field"><div class="navbar-control">
                  <input id="switchAnim" type="checkbox" name="switchAnim" class="switch is-rounded is-info"
                        {% if request.COOKIES.show_animations != "false" %}checked{% endif %}>
                  <label for="switchAnim" class="navbar-setting">Til/Fra</label>
                </div></div>
                <div class="has-text-light has-text-centered">
                    <button class="button is-small is-rounded is-light is-outlined tooltip is-tooltip-multiline is-tooltip-bottom" data-tooltip="
                    Animerede elementer kan slåes fra, til brug på ældre systemer (eller hvis man synes de er irriterende)
                    "><span class="icon"><i class="fas fa-info"></i></span></button>
                </div>
            </div></div>
             <div class="tile is-parent is-4-fullhd is-6-widescreen is-6-desktop is-6-tablet"><div class="tile is-child">
                 <p class="navbar-setting has-text-light is-uppercase has-text-centered">Foretrukken musikafspiller:</p>
                <div class="has-text-light has-text-centered navbar-controls field">
                  <div class="navbar-control">
                      <input class="is-checkradio is-info has-background-color" id="playerBC" type="radio" name="player"
                            {% if request.COOKIES.use_player != "spotify" %}checked{% endif %}>
                      <label for="playerBC" class="navbar-setting">Bandcamp</label>
                  </div>
                  <div class="navbar-control">
                      <input class="is-checkradio is-info has-background-color" id="playerSP" type="radio" name="player"
                            {% if request.COOKIES.use_player == "spotify" %}checked{% endif %}>
                      <label for="playerSP" class="navbar-setting">Spotify</label>
                  </div>
                </div>
                <div class="has-text-light has-text-centered">
                    <button class="button is-small is-rounded is-light is-outlined tooltip is-tooltip-multiline is-tooltip-bottom" data-tooltip="
                    Vælg hvilken tjeneste der skal bruges til afspillere på siden. Spotify kræver login, men hjælper med at dække sidens driftsomkostninger
                    "><span class="icon"><i class="fas fa-info"></i></span></button>
                </div>
            </div></div>
             <div class="tile is-parent is-4-fullhd is-6-widescreen is-6-desktop is-6-tablet"><div class="tile is-child">
                 <p class="navbar-setting has-text-light is-uppercase has-text-centered">Kommentarspor:</p>
                <div class="has-text-light has-text-centered navbar-controls field">
                  <div class="navbar-control">
                      <input class="is-checkradio is-info has-background-color" id="commentToggle" type="radio" name="comments"
                            {% if request.COOKIES.show_comments == "toggle" %}checked
                            {% elif not request.COOKIES.show_comments %}checked{% endif %}>
                      <label for="commentToggle" class="navbar-setting">Vælg</label>
                  </div>
                  <div class="navbar-control">
                      <input class="is-checkradio is-info has-background-color" id="commentOff" type="radio" name="comments"
                            {% if request.COOKIES.show_comments == "off" %}checked{% endif %}>
                      <label for="commentOff" class="navbar-setting">Skjul</label>
                  </div>
                  <div class="navbar-control">
                      <input class="is-checkradio is-info has-background-color" id="commentOn" type="radio" name="comments"
                            {% if request.COOKIES.show_comments == "on" %}checked{% endif %}>
                      <label for="commentOn" class="navbar-setting">Vis</label>
                  </div>
                </div>
                <div class="has-text-light has-text-centered">
                    <button class="button is-small is-rounded is-light is-outlined tooltip is-tooltip-multiline is-tooltip-top is-tooltip-bottom-desktop" data-tooltip="
                    Siden har et kommentarspor med bag-scenerne-observationer. Det kan vises eller skjules helt — som standard åbnes hver kommentar manuelt
                    "><span class="icon"><i class="fas fa-info"></i></span></button>
                </div>
            </div></div>
        </div>
        <br>
        <a class="button is-info navy-text" value="Gendindlæs siden" onClick="window.location.reload()"><span class="icon is-small">
        <i class="fa fa-redo"></i></span>Luk og gendindlæs siden</a>
  </div>
  <button class="modal-close is-large" onclick="modalClose('settings-modal')" aria-label="close"></button>
</div>

<nav class="navbar is-fixed is-dark is-transparent trans-bg" role="navigation" aria-label="main navigation" data-sal="fade" data-sal-duration="1500" data-sal-easing="ease-in">
    <a id="menuButton" role="button" class="navbar-burger nav-toggle burger navy" aria-label="menu" aria-expanded="false" data-target="sideMenu">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
</nav>
<div id="menuOverlay" class="menu-overlay nav-toggle"></div>
<div id="sideMenu" class="navbar is-fixed navbar-menu is-dark is-transparent side-menu">
<div class="navbar-contents">
    <div class="navbar-top">
        <a role="button" class="button is-medium is-rounded is-dark navy killPlayers" style="margin-left: 0.2em; margin-bottom: 0.2em; padding: 1.25em 1em; background-color: transparent;">
            <span class="icon">
              <i class="fas fa-volume-mute"></i>
            </span>
        </a>
          <a class="navbar-item has-text-light has-text-centered" href="/">
            <span class="icon is-small"><i class="fas fa-home"></i></span>
            Forsiden
          </a>
        <a class="navbar-item has-text-light has-text-centered" href="/kapitel/1">
            <span class="icon is-small"><i class="fas fa-book-open"></i></span>
            Historien
          </a>
      <a class="navbar-item has-text-light has-text-centered" href="/musik/">
        <span class="icon is-small"><i class="fas fa-music"></i></span>
        Musikken
      </a>
      <a class="navbar-item has-text-light has-text-centered" href="/medlemmer/">
        <span class="icon is-small"><i class="fas fa-user"></i></span>
        Personerne
      </a>
      <a class="navbar-item has-text-light has-text-centered"  href="/indeks/">
        <span class="icon is-small"><i class="fas fa-search"></i></span>
        Søgning & indeks
      </a>
      <a class="navbar-item has-text-light has-text-centered" href="/rulletekster/">
        <span class="icon is-small"><i class="fas fa-align-center"></i></span>
        Rulleteksterne
      </a>
          </div>
    <div class="navbar-bottom">
      <a onclick="" id="menuSettings" class="navbar-item has-text-light has-text-centered">
        <span class="icon is-small"><i class="fa fa-cog"></i></span>Sideindstillinger</a>
    <a class="navbar-item has-text-centered has-text-light has-image-centered" href="https://maanegal.dk">Et projekt fra
        <img src="{% get_media_prefix %}/moon_full.png" alt="Månegal Media"></a>
    </div>
</div>
</div>

{% block cookies %}
<div id="the-cookies" {% if not request.COOKIES.cookie_consent %}class="is-active" style="display: block;"{% endif %}>
<div class="columns is-desktop is-centered">
    <div class="column is-one-quarter"></div>
    <div class="column alive fade is-one-half">
    <div class="media has-text-light">
        <span class="media-left icon is-large">
          <i class="fas fa-cookie-bite"></i>
        </span>
      <div class="media-content">
        Denne side bruger cookies. Det betyder at den gemmer små stumper af information i din internetbrowser, for at huske dine indstillinger mv. på siden.
        For at bruge siden, er du nødt til at sige god for det. </div>
    </div>
    </div>
    <div class="column alive fade is-one-quarter has-text-centered has-text-left-desktop">
        <a class="button is-success" id="cookie-okay">
            <span class="icon is-small">
          <i class="fas fa-check"></i>
        </span>
        <span>Okay, så skidt da</span>
        </a>
    </div>
</div></div>
{% endblock cookies %}

{% block content %}
{% endblock %}

<script src="{% static 'hobro/sal/sal.js' %}"></script>
<script>
    (function () { ll = new LazyLoad({ elements_selector: '.lazy', });}());


    document.getElementById("switchAnim").addEventListener("click", setAnimPref);
    document.getElementById("playerSP").addEventListener("click", setPlayerPref);
    document.getElementById("playerBC").addEventListener("click", setPlayerPref);
    document.getElementById("commentOff").addEventListener("click", setCommentPref);
    document.getElementById("commentOn").addEventListener("click", setCommentPref);
    document.getElementById("commentToggle").addEventListener("click", setCommentPref);

    var cookieBanner = document.getElementById('the-cookies');
    var cookieBtn = document.getElementById('cookie-okay');

    cookieBtn.addEventListener('click', function() {
        setCookie('cookie_consent', "true", 365);
        cookieBanner.classList.remove('is-active');
    });

    var menuSettings = document.getElementById('menuSettings');

    menuSettings.addEventListener('click', function() {
        toggleShowMenu();
        modalOpen('settings-modal');
    });


    var killPlayers = document.getElementsByClassName("killPlayers");
    for (var i = 0; i < killPlayers.length; i++) {
        killPlayers[i].addEventListener("click", function() {
            reload_iframes();
        });
    }

    var animState = showAnimations()
    //if ( !animState == false ) {
        sal({
            threshold: 0.1,
            disable: animState,
        });
    //}

	</script>
</body>
</html>